<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ChunkyPNG::Color</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ChunkyPNG::Color</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/chunky_png/color_rb.html">
                lib/chunky_png/color.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="Color.html">Color</a> module defines methods for handling
colors. Within the <a href="../ChunkyPNG.html">ChunkyPNG</a> library, the
concepts of pixels and colors are both used, and they are both represented
by <a href="Color.html#M000445">a</a> Integer.
</p>
<p>
Pixels/colors are represented in RGBA components. Each of the four
components is stored with <a href="Color.html#M000445">a</a> depth of 8
bits (maximum value = 255 = {ChunkyPNG::Color::MAX}). Together, these
components are stored in <a href="Color.html#M000445">a</a> 4-byte Integer.
</p>
<p>
A color will always be represented using these 4 components in memory. When
the image is encoded, <a href="Color.html#M000445">a</a> more suitable
representation can be used (e.g. <a href="Color.html#M000433">rgb</a>, <a
href="Color.html#M000434">grayscale</a>, palette-based), for which several
conversion methods are provided in this module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000445">a</a>&nbsp;&nbsp;
      <a href="#M000460">alpha_decomposable?</a>&nbsp;&nbsp;
      <a href="#M000444">b</a>&nbsp;&nbsp;
      <a href="#M000454">blend</a>&nbsp;&nbsp;
      <a href="#M000453">compose</a>&nbsp;&nbsp;
      <a href="#M000452">compose_precise</a>&nbsp;&nbsp;
      <a href="#M000451">compose_quick</a>&nbsp;&nbsp;
      <a href="#M000461">decompose_alpha</a>&nbsp;&nbsp;
      <a href="#M000462">decompose_alpha_component</a>&nbsp;&nbsp;
      <a href="#M000463">decompose_alpha_components</a>&nbsp;&nbsp;
      <a href="#M000459">decompose_color</a>&nbsp;&nbsp;
      <a href="#M000472">euclidean_distance_rgba</a>&nbsp;&nbsp;
      <a href="#M000458">fade</a>&nbsp;&nbsp;
      <a href="#M000438">from_hex</a>&nbsp;&nbsp;
      <a href="#M000440">from_hsb</a>&nbsp;&nbsp;
      <a href="#M000441">from_hsl</a>&nbsp;&nbsp;
      <a href="#M000439">from_hsv</a>&nbsp;&nbsp;
      <a href="#M000436">from_rgb_stream</a>&nbsp;&nbsp;
      <a href="#M000437">from_rgba_stream</a>&nbsp;&nbsp;
      <a href="#M000449">fully_transparent?</a>&nbsp;&nbsp;
      <a href="#M000443">g</a>&nbsp;&nbsp;
      <a href="#M000434">grayscale</a>&nbsp;&nbsp;
      <a href="#M000448">grayscale?</a>&nbsp;&nbsp;
      <a href="#M000435">grayscale_alpha</a>&nbsp;&nbsp;
      <a href="#M000456">grayscale_teint</a>&nbsp;&nbsp;
      <a href="#M000473">html_color</a>&nbsp;&nbsp;
      <a href="#M000450">int8_mult</a>&nbsp;&nbsp;
      <a href="#M000455">interpolate_quick</a>&nbsp;&nbsp;
      <a href="#M000447">opaque!</a>&nbsp;&nbsp;
      <a href="#M000446">opaque?</a>&nbsp;&nbsp;
      <a href="#M000431">parse</a>&nbsp;&nbsp;
      <a href="#M000478">pass_bytesize</a>&nbsp;&nbsp;
      <a href="#M000476">pixel_bitsize</a>&nbsp;&nbsp;
      <a href="#M000475">pixel_bytesize</a>&nbsp;&nbsp;
      <a href="#M000442">r</a>&nbsp;&nbsp;
      <a href="#M000433">rgb</a>&nbsp;&nbsp;
      <a href="#M000432">rgba</a>&nbsp;&nbsp;
      <a href="#M000474">samples_per_pixel</a>&nbsp;&nbsp;
      <a href="#M000477">scanline_bytesize</a>&nbsp;&nbsp;
      <a href="#M000457">to_grayscale</a>&nbsp;&nbsp;
      <a href="#M000471">to_grayscale_alpha_bytes</a>&nbsp;&nbsp;
      <a href="#M000470">to_grayscale_bytes</a>&nbsp;&nbsp;
      <a href="#M000464">to_hex</a>&nbsp;&nbsp;
      <a href="#M000466">to_hsb</a>&nbsp;&nbsp;
      <a href="#M000467">to_hsl</a>&nbsp;&nbsp;
      <a href="#M000465">to_hsv</a>&nbsp;&nbsp;
      <a href="#M000468">to_truecolor_alpha_bytes</a>&nbsp;&nbsp;
      <a href="#M000469">to_truecolor_bytes</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MAX</td>
          <td>=</td>
          <td class="context-item-value">0xff</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] The maximum value of each color component.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">HEX3_COLOR_REGEXP</td>
          <td>=</td>
          <td class="context-item-value">/\A(?:#|0x)?([0-9a-f]{3})\z/i</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@private @return [Regexp] The regexp to <a
href="Color.html#M000431">parse</a> 3-digit hex color values.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">HEX6_COLOR_REGEXP</td>
          <td>=</td>
          <td class="context-item-value">/\A(?:#|0x)?([0-9a-f]{6})([0-9a-f]{2})?\z/i</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@private @return [Regexp] The regexp to <a
href="Color.html#M000431">parse</a> 6- and 8-digit hex color values.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">HTML_COLOR_REGEXP</td>
          <td>=</td>
          <td class="context-item-value">/^([a-z][a-z_ ]+[a-z])(?:\ ?\@\ ?(1\.0|0\.\d+))?$/i</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@private @return [Regexp] The regexp to <a
href="Color.html#M000431">parse</a> named color values.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MAX_EUCLIDEAN_DISTANCE_RGBA</td>
          <td>=</td>
          <td class="context-item-value">Math.sqrt(MAX**2 * 4)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
Could be simplified as MAX * 2, but this format mirrors the math in {<a
href="Color.html#M000472">euclidean_distance_rgba</a>} @return [Float] The
maximum Euclidean distance of two RGBA colors.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">PREDEFINED_COLORS</td>
          <td>=</td>
          <td class="context-item-value">{       :aliceblue            =&gt; 0xf0f8ff00,       :antiquewhite         =&gt; 0xfaebd700,       :aqua                 =&gt; 0x00ffff00,       :aquamarine           =&gt; 0x7fffd400,       :azure                =&gt; 0xf0ffff00,       :beige                =&gt; 0xf5f5dc00,       :bisque               =&gt; 0xffe4c400,       :black                =&gt; 0x00000000,       :blanchedalmond       =&gt; 0xffebcd00,       :blue                 =&gt; 0x0000ff00,       :blueviolet           =&gt; 0x8a2be200,       :brown                =&gt; 0xa52a2a00,       :burlywood            =&gt; 0xdeb88700,       :cadetblue            =&gt; 0x5f9ea000,       :chartreuse           =&gt; 0x7fff0000,       :chocolate            =&gt; 0xd2691e00,       :coral                =&gt; 0xff7f5000,       :cornflowerblue       =&gt; 0x6495ed00,       :cornsilk             =&gt; 0xfff8dc00,       :crimson              =&gt; 0xdc143c00,       :cyan                 =&gt; 0x00ffff00,       :darkblue             =&gt; 0x00008b00,       :darkcyan             =&gt; 0x008b8b00,       :darkgoldenrod        =&gt; 0xb8860b00,       :darkgray             =&gt; 0xa9a9a900,       :darkgrey             =&gt; 0xa9a9a900,       :darkgreen            =&gt; 0x00640000,       :darkkhaki            =&gt; 0xbdb76b00,       :darkmagenta          =&gt; 0x8b008b00,       :darkolivegreen       =&gt; 0x556b2f00,       :darkorange           =&gt; 0xff8c0000,       :darkorchid           =&gt; 0x9932cc00,       :darkred              =&gt; 0x8b000000,       :darksalmon           =&gt; 0xe9967a00,       :darkseagreen         =&gt; 0x8fbc8f00,       :darkslateblue        =&gt; 0x483d8b00,       :darkslategray        =&gt; 0x2f4f4f00,       :darkslategrey        =&gt; 0x2f4f4f00,       :darkturquoise        =&gt; 0x00ced100,       :darkviolet           =&gt; 0x9400d300,       :deeppink             =&gt; 0xff149300,       :deepskyblue          =&gt; 0x00bfff00,       :dimgray              =&gt; 0x69696900,       :dimgrey              =&gt; 0x69696900,       :dodgerblue           =&gt; 0x1e90ff00,       :firebrick            =&gt; 0xb2222200,       :floralwhite          =&gt; 0xfffaf000,       :forestgreen          =&gt; 0x228b2200,       :fuchsia              =&gt; 0xff00ff00,       :gainsboro            =&gt; 0xdcdcdc00,       :ghostwhite           =&gt; 0xf8f8ff00,       :gold                 =&gt; 0xffd70000,       :goldenrod            =&gt; 0xdaa52000,       :gray                 =&gt; 0x80808000,       :grey                 =&gt; 0x80808000,       :green                =&gt; 0x00800000,       :greenyellow          =&gt; 0xadff2f00,       :honeydew             =&gt; 0xf0fff000,       :hotpink              =&gt; 0xff69b400,       :indianred            =&gt; 0xcd5c5c00,       :indigo               =&gt; 0x4b008200,       :ivory                =&gt; 0xfffff000,       :khaki                =&gt; 0xf0e68c00,       :lavender             =&gt; 0xe6e6fa00,       :lavenderblush        =&gt; 0xfff0f500,       :lawngreen            =&gt; 0x7cfc0000,       :lemonchiffon         =&gt; 0xfffacd00,       :lightblue            =&gt; 0xadd8e600,       :lightcoral           =&gt; 0xf0808000,       :lightcyan            =&gt; 0xe0ffff00,       :lightgoldenrodyellow =&gt; 0xfafad200,       :lightgray            =&gt; 0xd3d3d300,       :lightgrey            =&gt; 0xd3d3d300,       :lightgreen           =&gt; 0x90ee9000,       :lightpink            =&gt; 0xffb6c100,       :lightsalmon          =&gt; 0xffa07a00,       :lightseagreen        =&gt; 0x20b2aa00,       :lightskyblue         =&gt; 0x87cefa00,       :lightslategray       =&gt; 0x77889900,       :lightslategrey       =&gt; 0x77889900,       :lightsteelblue       =&gt; 0xb0c4de00,       :lightyellow          =&gt; 0xffffe000,       :lime                 =&gt; 0x00ff0000,       :limegreen            =&gt; 0x32cd3200,       :linen                =&gt; 0xfaf0e600,       :magenta              =&gt; 0xff00ff00,       :maroon               =&gt; 0x80000000,       :mediumaquamarine     =&gt; 0x66cdaa00,       :mediumblue           =&gt; 0x0000cd00,       :mediumorchid         =&gt; 0xba55d300,       :mediumpurple         =&gt; 0x9370d800,       :mediumseagreen       =&gt; 0x3cb37100,       :mediumslateblue      =&gt; 0x7b68ee00,       :mediumspringgreen    =&gt; 0x00fa9a00,       :mediumturquoise      =&gt; 0x48d1cc00,       :mediumvioletred      =&gt; 0xc7158500,       :midnightblue         =&gt; 0x19197000,       :mintcream            =&gt; 0xf5fffa00,       :mistyrose            =&gt; 0xffe4e100,       :moccasin             =&gt; 0xffe4b500,       :navajowhite          =&gt; 0xffdead00,       :navy                 =&gt; 0x00008000,       :oldlace              =&gt; 0xfdf5e600,       :olive                =&gt; 0x80800000,       :olivedrab            =&gt; 0x6b8e2300,       :orange               =&gt; 0xffa50000,       :orangered            =&gt; 0xff450000,       :orchid               =&gt; 0xda70d600,       :palegoldenrod        =&gt; 0xeee8aa00,       :palegreen            =&gt; 0x98fb9800,       :paleturquoise        =&gt; 0xafeeee00,       :palevioletred        =&gt; 0xd8709300,       :papayawhip           =&gt; 0xffefd500,       :peachpuff            =&gt; 0xffdab900,       :peru                 =&gt; 0xcd853f00,       :pink                 =&gt; 0xffc0cb00,       :plum                 =&gt; 0xdda0dd00,       :powderblue           =&gt; 0xb0e0e600,       :purple               =&gt; 0x80008000,       :red                  =&gt; 0xff000000,       :rosybrown            =&gt; 0xbc8f8f00,       :royalblue            =&gt; 0x4169e100,       :saddlebrown          =&gt; 0x8b451300,       :salmon               =&gt; 0xfa807200,       :sandybrown           =&gt; 0xf4a46000,       :seagreen             =&gt; 0x2e8b5700,       :seashell             =&gt; 0xfff5ee00,       :sienna               =&gt; 0xa0522d00,       :silver               =&gt; 0xc0c0c000,       :skyblue              =&gt; 0x87ceeb00,       :slateblue            =&gt; 0x6a5acd00,       :slategray            =&gt; 0x70809000,       :slategrey            =&gt; 0x70809000,       :snow                 =&gt; 0xfffafa00,       :springgreen          =&gt; 0x00ff7f00,       :steelblue            =&gt; 0x4682b400,       :tan                  =&gt; 0xd2b48c00,       :teal                 =&gt; 0x00808000,       :thistle              =&gt; 0xd8bfd800,       :tomato               =&gt; 0xff634700,       :turquoise            =&gt; 0x40e0d000,       :violet               =&gt; 0xee82ee00,       :wheat                =&gt; 0xf5deb300,       :white                =&gt; 0xffffff00,       :whitesmoke           =&gt; 0xf5f5f500,       :yellow               =&gt; 0xffff0000,       :yellowgreen          =&gt; 0x9acd3200</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Hash&lt;Symbol, Integer&gt;] All the predefined color names in
HTML.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">BLACK</td>
          <td>=</td>
          <td class="context-item-value">rgb(  0,   0,   0)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] Black pixel/color

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">WHITE</td>
          <td>=</td>
          <td class="context-item-value">rgb(255, 255, 255)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] White pixel/color

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">TRANSPARENT</td>
          <td>=</td>
          <td class="context-item-value">rgba(0, 0, 0, 0)</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
@return [Integer] Fully transparent pixel/color

</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000445" class="method-detail">
        <a name="M000445"></a>

        <div class="method-heading">
          <a href="#M000445" class="method-signature">
          <span class="method-name">a</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the alpha channel value for the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000445-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000445-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 296</span>
296:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>)
297:       <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x000000ff</span>
298:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000460" class="method-detail">
        <a name="M000460"></a>

        <div class="method-heading">
          <a href="#M000460" class="method-signature">
          <span class="method-name">alpha_decomposable?</span><span class="method-args">(color, mask, bg, tolerance = 1)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks whether an alpha channel value can successfully be composed given
the resulting color, the mask color and <a href="Color.html#M000445">a</a>
background color, all of which should be opaque.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being
</p>
<pre>
  composed
</pre>
<p>
@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, <a
href="Color.html#M000445">a</a> value
</p>
<pre>
  between 0 and 255.
</pre>
<p>
@return [Boolean] True if the alpha component can be decomposed
</p>
<pre>
  successfully.
</pre>
<p>
@see <a href="Color.html#M000461">decompose_alpha</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000460-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000460-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 500</span>
500:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
501:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
502:       <span class="ruby-identifier">sum</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> }
503:       <span class="ruby-identifier">max</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>
504:       <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">255</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">components</span>.<span class="ruby-identifier">min</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tolerance</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">max</span>
505:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000444" class="method-detail">
        <a name="M000444"></a>

        <div class="method-heading">
          <a href="#M000444" class="method-signature">
          <span class="method-name">b</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the blue-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000444-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000444-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 288</span>
288:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>)
289:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x0000ff00</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
290:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000454" class="method-detail">
        <a name="M000454"></a>

        <div class="method-heading">
          <a href="#M000454" class="method-signature">
          <span class="method-name">blend</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Blends the foreground and background color by taking the average of the
components.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The blended color.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000454-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000454-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 403</span>
403:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">blend</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
404:       (<span class="ruby-identifier">fg</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bg</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">1</span>
405:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000453" class="method-detail">
        <a name="M000453"></a>

        <div class="method-heading">
          <span class="method-name">compose</span><span class="method-args">(fg, bg)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Color.html#M000451">compose_quick</a>
</p>
        </div>
      </div>

      <div id="method-M000452" class="method-detail">
        <a name="M000452"></a>

        <div class="method-heading">
          <a href="#M000452" class="method-signature">
          <span class="method-name">compose_precise</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Composes two colors with an alpha channel using floating point math.
</p>
<p>
This method uses more precise floating point math, but this precision is
lost when the result is converted back to an integer. Because it is slower
than the version based on integer math, that version is preferred.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The composited color. @see <a
href="Color.html#M000451">ChunkyPNG::Color#compose_quick</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000452-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000452-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 380</span>
380:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compose_precise</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
381:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
382:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)
383: 
384:       <span class="ruby-identifier">fg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
385:       <span class="ruby-identifier">bg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
386:       <span class="ruby-identifier">a_com</span> = (<span class="ruby-value">1.0</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">fg_a</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">bg_a</span>
387: 
388:       <span class="ruby-identifier">new_r</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
389:       <span class="ruby-identifier">new_g</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
390:       <span class="ruby-identifier">new_b</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
391:       <span class="ruby-identifier">new_a</span> = ((<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>) <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
392:       <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
393:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000451" class="method-detail">
        <a name="M000451"></a>

        <div class="method-heading">
          <a href="#M000451" class="method-signature">
          <span class="method-name">compose_quick</span><span class="method-args">(fg, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Composes two colors with an alpha channel using integer math.
</p>
<p>
This version is faster than the version based on floating point math, so
this compositing function is used by default.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The composited color. @see <a
href="Color.html#M000452">ChunkyPNG::Color#compose_precise</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000451-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000451-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 358</span>
358:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compose_quick</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
359:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
360:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)
361: 
362:       <span class="ruby-identifier">a_com</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-value">0xff</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>))
363:       <span class="ruby-identifier">new_r</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>))
364:       <span class="ruby-identifier">new_g</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>))
365:       <span class="ruby-identifier">new_b</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>))
366:       <span class="ruby-identifier">new_a</span> = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>
367:       <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
368:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000461" class="method-detail">
        <a name="M000461"></a>

        <div class="method-heading">
          <a href="#M000461" class="method-signature">
          <span class="method-name">decompose_alpha</span><span class="method-args">(color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes the alpha channel value given the resulting color, the mask
color and <a href="Color.html#M000445">a</a> background color, all of which
should be opaque.
</p>
<p>
Make sure to call {alpha_decomposable?} first to see if the alpha channel
value can successfully decomposed with <a href="Color.html#M000445">a</a>
given tolerance, otherwise the return value of this method is undefined.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being
</p>
<pre>
  composed
</pre>
<p>
@param [Integer] bg The background color on which the color was composed.
@return [Integer] The best fitting alpha channel, <a
href="Color.html#M000445">a</a> value between 0 and
</p>
<pre>
  255.
</pre>
<p>
@see alpha_decomposable?
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000461-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000461-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 521</span>
521:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
522:       <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
523:       (<span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> } <span class="ruby-operator">/</span> <span class="ruby-value">3.0</span>).<span class="ruby-identifier">round</span>
524:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000462" class="method-detail">
        <a name="M000462"></a>

        <div class="method-heading">
          <a href="#M000462" class="method-signature">
          <span class="method-name">decompose_alpha_component</span><span class="method-args">(channel, color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes an alpha channel for either the <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a> or <a
href="Color.html#M000444">b</a> color channel. @param [:<a
href="Color.html#M000442">r</a>, :<a href="Color.html#M000443">g</a>, :<a
href="Color.html#M000444">b</a>] channel The channel to decompose the alpha
channel
</p>
<pre>
  from.
</pre>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being
</p>
<pre>
  composed
</pre>
<p>
@param [Integer] bg The background color on which the color was composed.
@return [Integer] The decomposed alpha value for the channel.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000462-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000462-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 534</span>
534:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
535:       <span class="ruby-identifier">cc</span>, <span class="ruby-identifier">mc</span>, <span class="ruby-identifier">bc</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>), <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">mask</span>), <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">bg</span>)
536: 
537:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0x00</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cc</span>
538:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0xff</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">bc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mc</span>
539:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0xff</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mc</span>
540: 
541:       (((<span class="ruby-identifier">bc</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cc</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">bc</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">mc</span>).<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
542:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000463" class="method-detail">
        <a name="M000463"></a>

        <div class="method-heading">
          <a href="#M000463" class="method-signature">
          <span class="method-name">decompose_alpha_components</span><span class="method-args">(color, mask, bg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes the alpha channels for the <a href="Color.html#M000442">r</a>,
<a href="Color.html#M000443">g</a> and <a href="Color.html#M000444">b</a>
color channel. @param [Integer] color The color that was the result of
compositing. @param [Integer] mask The opaque variant of the color that was
being
</p>
<pre>
  composed
</pre>
<p>
@param [Integer] bg The background color on which the color was composed.
@return [Array&lt;Integer&gt;] The decomposed alpha values for the <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a> and <a
href="Color.html#M000444">b</a>
</p>
<pre>
  channels.
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000463-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000463-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 551</span>
551:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
552:       [
553:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:r</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
554:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:g</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
555:         <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">:b</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
556:       ]
557:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000459" class="method-detail">
        <a name="M000459"></a>

        <div class="method-heading">
          <a href="#M000459" class="method-signature">
          <span class="method-name">decompose_color</span><span class="method-args">(color, mask, bg, tolerance = 1)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decomposes <a href="Color.html#M000445">a</a> color, given <a
href="Color.html#M000445">a</a> color, <a href="Color.html#M000445">a</a>
mask color and <a href="Color.html#M000445">a</a> background color. The
returned color will be <a href="Color.html#M000445">a</a> variant of the
mask color, with the alpha channel set to the best fitting value. This
basically is the reverse operation if alpha composition.
</p>
<p>
If the color cannot be decomposed, this method will return the fully
transparent variant of the mask color.
</p>
<p>
@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being
</p>
<pre>
  composed
</pre>
<p>
@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, <a
href="Color.html#M000445">a</a> value
</p>
<pre>
  between 0 and 255.
</pre>
<p>
@return [Integer] The decomposed color, <a href="Color.html#M000445">a</a>
variant of the masked color
</p>
<pre>
  with the alpha channel set to an appropriate value.
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000459-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000459-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 479</span>
479:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decompose_color</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
480:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span>)
481:         <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
482:       <span class="ruby-keyword kw">else</span>
483:         <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>
484:       <span class="ruby-keyword kw">end</span>
485:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000472" class="method-detail">
        <a name="M000472"></a>

        <div class="method-heading">
          <a href="#M000472" class="method-signature">
          <span class="method-name">euclidean_distance_rgba</span><span class="method-args">(pixel_after, pixel_before)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Compute the Euclidean distance between 2 colors in RGBA
</p>
<p>
This method simply takes the Euclidean distance between the RGBA channels
of 2 colors, which gives us <a href="Color.html#M000445">a</a> measure of
how different the two colors are.
</p>
<p>
Although it would be more perceptually accurate to calculate <a
href="Color.html#M000445">a</a> proper Delta E in Lab colorspace, this
method should serve many use-cases while avoiding the overhead of
converting RGBA to Lab.
</p>
<p>
@param pixel_after [Integer] @param pixel_before [Integer] @return [Float]
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000472-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000472-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 716</span>
716:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">euclidean_distance_rgba</span>(<span class="ruby-identifier">pixel_after</span>, <span class="ruby-identifier">pixel_before</span>)
717:       <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>(
718:         (<span class="ruby-identifier">r</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
719:         (<span class="ruby-identifier">g</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
720:         (<span class="ruby-identifier">b</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
721:         (<span class="ruby-identifier">a</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span>
722:       )
723:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000458" class="method-detail">
        <a name="M000458"></a>

        <div class="method-heading">
          <a href="#M000458" class="method-signature">
          <span class="method-name">fade</span><span class="method-args">(color, factor)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Lowers the intensity of <a href="Color.html#M000445">a</a> color, by
lowering its alpha by <a href="Color.html#M000445">a</a> given factor.
@param [Integer] color The color to adjust. @param [Integer] factor Fade
factor as an integer between 0 and 255. @return [Integer] The faded color.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000458-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000458-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 458</span>
458:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fade</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">factor</span>)
459:       <span class="ruby-identifier">new_alpha</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">factor</span>)
460:       (<span class="ruby-identifier">color</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>) <span class="ruby-operator">|</span> <span class="ruby-identifier">new_alpha</span>
461:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000438" class="method-detail">
        <a name="M000438"></a>

        <div class="method-heading">
          <a href="#M000438" class="method-signature">
          <span class="method-name">from_hex</span><span class="method-args">(hex_value, opacity = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> color by converting it from <a
href="Color.html#M000445">a</a> string in hex notation.
</p>
<p>
It supports colors with (rrggbbaa) or without (rrggbb) alpha channel as
well as the 3-digit short format (<a href="Color.html#M000433">rgb</a>) for
those without. <a href="Color.html">Color</a> strings may include the
prefix &quot;0x&quot; or &quot;#&quot;.
</p>
<p>
@param [<a href="../String.html">String</a>] str The color in hex notation.
@return [Integer] The
</p>
<pre>
  converted color value.
</pre>
<p>
@param [Integer] opacity The opacity value for the color. Overrides any
</p>
<pre>
   opacity value given in the hex value if given.
</pre>
<p>
@return [Integer] The color value. @raise [ArgumentError] if the value
given is not <a href="Color.html#M000445">a</a> hex color notation.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000438-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000438-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 166</span>
166:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">hex_value</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword kw">nil</span>)
167:       <span class="ruby-identifier">base_color</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">hex_value</span>
168:                    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">HEX3_COLOR_REGEXP</span>
169:                      <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/([0-9a-f])/i</span>, <span class="ruby-value str">'\1\1'</span>).<span class="ruby-identifier">hex</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>
170:                    <span class="ruby-keyword kw">when</span> <span class="ruby-constant">HEX6_COLOR_REGEXP</span>
171:                      <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>
172:                    <span class="ruby-keyword kw">else</span>
173:                      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Not a valid hex color notation: #{hex_value.inspect}!&quot;</span>
174:                    <span class="ruby-keyword kw">end</span>
175:       <span class="ruby-identifier">opacity</span>  <span class="ruby-operator">||=</span> <span class="ruby-identifier">$2</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
176:       <span class="ruby-identifier">base_color</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span>
177:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000440" class="method-detail">
        <a name="M000440"></a>

        <div class="method-heading">
          <span class="method-name">from_hsb</span><span class="method-args">(hue, saturation, value, alpha = 255)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Color.html#M000439">from_hsv</a>
</p>
        </div>
      </div>

      <div id="method-M000441" class="method-detail">
        <a name="M000441"></a>

        <div class="method-heading">
          <a href="#M000441" class="method-signature">
          <span class="method-name">from_hsl</span><span class="method-args">(hue, saturation, lightness, alpha = 255)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color from an HSL triple.
</p>
<p>
This implementation follows the modern convention of 0 degrees hue
indicating red.
</p>
<p>
@param [Fixnum] hue The hue component (0-360) @param [Fixnum] saturation
The saturation component (0-1) @param [Fixnum] lightness The lightness
component (0-1) @param [Fixnum] alpha Defaults to opaque (255). @return
[Integer] The newly constructed color value. @raise [ArgumentError] if the
hsl triple is invalid. @see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000441-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000441-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_hsl</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">alpha</span> = <span class="ruby-value">255</span>)
218:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Hue #{hue} was not between 0 and 360&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">360</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">hue</span>)
219:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Saturation #{saturation} was not between 0 and 1&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saturation</span>)
220:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Lightness #{lightness} was not between 0 and 1&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">lightness</span>)
221:       <span class="ruby-identifier">chroma</span> = (<span class="ruby-value">1</span> <span class="ruby-operator">-</span> (<span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">saturation</span>
222:       <span class="ruby-identifier">rgb</span>    = <span class="ruby-identifier">cylindrical_to_cubic</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">chroma</span>)
223:       <span class="ruby-identifier">rgb</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span> ((<span class="ruby-identifier">component</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">0</span><span class="ruby-value">.5</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">chroma</span>) <span class="ruby-operator">*</span> <span class="ruby-value">255</span>).<span class="ruby-identifier">to_i</span> }
224:       <span class="ruby-identifier">rgb</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">alpha</span>
225:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rgb</span>)
226:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000439" class="method-detail">
        <a name="M000439"></a>

        <div class="method-heading">
          <a href="#M000439" class="method-signature">
          <span class="method-name">from_hsv</span><span class="method-args">(hue, saturation, value, alpha = 255)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color from an HSV triple.
</p>
<p>
Create <a href="Color.html#M000445">a</a> new color using an HSV (sometimes
also called HSB) triple. The words `value` and `brightness` are used
interchangeably and synonymously in descriptions of this colorspace. This
implementation follows the modern convention of 0 degrees hue indicating
red.
</p>
<p>
@param [Fixnum] hue The hue component (0-360) @param [Fixnum] saturation
The saturation component (0-1) @param [Fixnum] value The value (brightness)
component (0-1) @param [Fixnum] alpha Defaults to opaque (255). @return
[Integer] The newly constructed color value. @raise [ArgumentError] if the
hsv triple is invalid. @see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000439-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000439-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 193</span>
193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_hsv</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">alpha</span> = <span class="ruby-value">255</span>)
194:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Hue must be between 0 and 360&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">360</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">hue</span>)
195:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Saturation must be between 0 and 1&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saturation</span>)
196:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Value/brightness must be between 0 and 1&quot;</span> <span class="ruby-keyword kw">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">value</span>)
197:       <span class="ruby-identifier">chroma</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">saturation</span>
198:       <span class="ruby-identifier">rgb</span>    = <span class="ruby-identifier">cylindrical_to_cubic</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">chroma</span>)
199:       <span class="ruby-identifier">rgb</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span> ((<span class="ruby-identifier">component</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">chroma</span>) <span class="ruby-operator">*</span> <span class="ruby-value">255</span>).<span class="ruby-identifier">to_i</span> }
200:       <span class="ruby-identifier">rgb</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">alpha</span>
201:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rgb</span>)
202:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000436" class="method-detail">
        <a name="M000436"></a>

        <div class="method-heading">
          <a href="#M000436" class="method-signature">
          <span class="method-name">from_rgb_stream</span><span class="method-args">(stream, pos = 0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> color by unpacking an <a
href="Color.html#M000433">rgb</a> triple from <a
href="Color.html#M000445">a</a> string.
</p>
<p>
@param [<a href="../String.html">String</a>] stream The string to load the
color from. It should be
</p>
<pre>
    at least 3 + pos bytes long.
</pre>
<p>
@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000436-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000436-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 140</span>
140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_rgb_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
141:       <span class="ruby-identifier">rgb</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C3&quot;</span>))
142:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000437" class="method-detail">
        <a name="M000437"></a>

        <div class="method-heading">
          <a href="#M000437" class="method-signature">
          <span class="method-name">from_rgba_stream</span><span class="method-args">(stream, pos = 0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> color by unpacking an <a
href="Color.html#M000432">rgba</a> triple from <a
href="Color.html#M000445">a</a> string
</p>
<p>
@param [<a href="../String.html">String</a>] stream The string to load the
color from. It should be
</p>
<pre>
     at least 4 + pos bytes long.
</pre>
<p>
@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000437-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000437-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 150</span>
150:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">from_rgba_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
151:       <span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C4&quot;</span>))
152:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000449" class="method-detail">
        <a name="M000449"></a>

        <div class="method-heading">
          <a href="#M000449" class="method-signature">
          <span class="method-name">fully_transparent?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully transparent.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals 0.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000449-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000449-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 327</span>
327:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">value</span>)
328:       <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x00000000</span>
329:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000443" class="method-detail">
        <a name="M000443"></a>

        <div class="method-heading">
          <a href="#M000443" class="method-signature">
          <span class="method-name">g</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the green-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000443-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000443-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 280</span>
280:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
281:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x00ff0000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">16</span>
282:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000434" class="method-detail">
        <a name="M000434"></a>

        <div class="method-heading">
          <a href="#M000434" class="method-signature">
          <span class="method-name">grayscale</span><span class="method-args">(teint)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color using <a
href="Color.html#M000445">a</a> <a href="Color.html#M000434">grayscale</a>
teint. @param [Integer] teint The <a
href="Color.html#M000434">grayscale</a> teint (0-255), will be used as <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a>,
</p>
<pre>
  and b value.
</pre>
<p>
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000434-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000434-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 117</span>
117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale</span>(<span class="ruby-identifier">teint</span>)
118:       <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
119:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000448" class="method-detail">
        <a name="M000448"></a>

        <div class="method-heading">
          <a href="#M000448" class="method-signature">
          <span class="method-name">grayscale?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully transparent.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
<a href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a> and
<a href="Color.html#M000444">b</a> component are equal.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000448-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000448-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 319</span>
319:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale?</span>(<span class="ruby-identifier">value</span>)
320:       <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
321:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000435" class="method-detail">
        <a name="M000435"></a>

        <div class="method-heading">
          <a href="#M000435" class="method-signature">
          <span class="method-name">grayscale_alpha</span><span class="method-args">(teint, a)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color using <a
href="Color.html#M000445">a</a> <a href="Color.html#M000434">grayscale</a>
teint and alpha value. @param [Integer] teint The <a
href="Color.html#M000434">grayscale</a> teint (0-255), will be used as <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a>,
</p>
<pre>
  and b value.
</pre>
<p>
@param [Integer] <a href="Color.html#M000445">a</a> The opacity (0-255)
@return [Integer] The newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000435-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000435-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 126</span>
126:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">teint</span>, <span class="ruby-identifier">a</span>)
127:       <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
128:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000456" class="method-detail">
        <a name="M000456"></a>

        <div class="method-heading">
          <a href="#M000456" class="method-signature">
          <span class="method-name">grayscale_teint</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calculates the <a href="Color.html#M000434">grayscale</a> teint of an RGB
color.
</p>
<p>
@param [Integer] color The color to convert. @return [Integer] The <a
href="Color.html#M000434">grayscale</a> teint of the input color, 0-255.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000456-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000456-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 435</span>
435:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>)
436:       (<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.3</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.59</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0</span><span class="ruby-value">.11</span>).<span class="ruby-identifier">round</span>
437:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000473" class="method-detail">
        <a name="M000473"></a>

        <div class="method-heading">
          <a href="#M000473" class="method-signature">
          <span class="method-name">html_color</span><span class="method-args">(color_name, opacity = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets <a href="Color.html#M000445">a</a> color value based on <a
href="Color.html#M000445">a</a> HTML color name.
</p>
<p>
The color name is flexible. E.g. <tt>&#8216;yellowgreen&#8216;</tt>,
<tt>&#8216;Yellow green&#8216;</tt>, <tt>&#8216;YellowGreen&#8216;</tt>,
<tt>&#8216;YELLOW_GREEN&#8216;</tt> and <tt>:yellow_green</tt> will all
return the same color value.
</p>
<p>
You can include <a href="Color.html#M000445">a</a> opacity level in the
color name (e.g. <tt>&#8216;red @ 0.5&#8216;</tt>) or give an explicit
opacity value as second argument. If no opacity value is given, the color
will be fully opaque.
</p>
<p>
@param [Symbol, <a href="../String.html">String</a>] color_name The color
name. It may include an
</p>
<pre>
  opacity specifier like &lt;tt&gt;@ 0.8&lt;/tt&gt; to set the color's opacity.
</pre>
<p>
@param [Integer] opacity The opacity value for the color between 0 and
</p>
<pre>
  255. Overrides any opacity value given in the color name.
</pre>
<p>
@return [Integer] The color value. @raise [<a
href="Exception.html">ChunkyPNG::Exception</a>] If the color name was not
recognized.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000473-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000473-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 901</span>
901:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">color_name</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword kw">nil</span>)
902:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">color_name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">HTML_COLOR_REGEXP</span>
903:         <span class="ruby-identifier">opacity</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">$2</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">255.0</span>).<span class="ruby-identifier">round</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
904:         <span class="ruby-identifier">base_color_name</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/[^a-z]+/i</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
905:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">PREDEFINED_COLORS</span>[<span class="ruby-identifier">base_color_name</span>] <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">PREDEFINED_COLORS</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">base_color_name</span>)
906:       <span class="ruby-keyword kw">end</span>
907:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown color name #{color_name}!&quot;</span>
908:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000450" class="method-detail">
        <a name="M000450"></a>

        <div class="method-heading">
          <a href="#M000450" class="method-signature">
          <span class="method-name">int8_mult</span><span class="method-args">(a, b)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Multiplies two fractions using integer math, where the fractions are stored
using an integer between 0 and 255. This method is used as <a
href="Color.html#M000445">a</a> helper method for compositing colors using
integer math.
</p>
<p>
This is <a href="Color.html#M000445">a</a> quicker implementation of ((<a
href="Color.html#M000445">a</a> * <a href="Color.html#M000444">b</a>) /
255.0).round.
</p>
<p>
@param [Integer] <a href="Color.html#M000445">a</a> The first fraction.
@param [Integer] <a href="Color.html#M000444">b</a> The second fraction.
@return [Integer] The result of the multiplication.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000450-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000450-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 344</span>
344:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
345:       <span class="ruby-identifier">t</span> = <span class="ruby-identifier">a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">0x80</span>
346:       ((<span class="ruby-identifier">t</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">t</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
347:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000455" class="method-detail">
        <a name="M000455"></a>

        <div class="method-heading">
          <a href="#M000455" class="method-signature">
          <span class="method-name">interpolate_quick</span><span class="method-args">(fg, bg, alpha)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Interpolates the foreground and background colors by the given alpha value.
This also blends the alpha channels themselves.
</p>
<p>
A blending factor of 255 will give entirely the foreground, while <a
href="Color.html#M000445">a</a> blending factor of 0 will give the
background.
</p>
<p>
@param [Integer] fg The foreground color. @param [Integer] bg The
background color. @param [Integer] alpha The blending factor (fixed 8bit)
@param [Integer] The interpolated color.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000455-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000455-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 417</span>
417:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">interpolate_quick</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">alpha</span>)
418:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">alpha</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">255</span>
419:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">alpha</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
420: 
421:       <span class="ruby-identifier">alpha_com</span> = <span class="ruby-value">255</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">alpha</span>
422: 
423:       <span class="ruby-identifier">new_r</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>))
424:       <span class="ruby-identifier">new_g</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>))
425:       <span class="ruby-identifier">new_b</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>))
426:       <span class="ruby-identifier">new_a</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>))
427: 
428:       <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
429:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000447" class="method-detail">
        <a name="M000447"></a>

        <div class="method-heading">
          <a href="#M000447" class="method-signature">
          <span class="method-name">opaque!</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the opaque value of this color by removing the alpha channel.
@param [Integer] value The color to transform. @return [Integer] The opaque
color
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000447-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000447-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 311</span>
311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opaque!</span>(<span class="ruby-identifier">value</span>)
312:       <span class="ruby-identifier">value</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x000000ff</span>
313:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000446" class="method-detail">
        <a name="M000446"></a>

        <div class="method-heading">
          <a href="#M000446" class="method-signature">
          <span class="method-name">opaque?</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this color is fully opaque.
</p>
<p>
@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000446-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000446-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 304</span>
304:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">value</span>)
305:       <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x000000ff</span>
306:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000431" class="method-detail">
        <a name="M000431"></a>

        <div class="method-heading">
          <a href="#M000431" class="method-signature">
          <span class="method-name">parse</span><span class="method-args">(source)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Parses <a href="Color.html#M000445">a</a> color value given <a
href="Color.html#M000445">a</a> numeric or string argument.
</p>
<p>
It supports color numbers, colors in hex notation and named HTML colors.
</p>
<p>
@param [Integer, <a href="../String.html">String</a>] The color value.
@return [Integer] The color value, with the opacity applied if one was
</p>
<pre>
  given.
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000431-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000431-source">
<pre>
    <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 84</span>
84:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>)
85:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">source</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>)
86:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>
87:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\d+$/</span>; <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>
88:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">HEX3_COLOR_REGEXP</span>, <span class="ruby-constant">HEX6_COLOR_REGEXP</span>; <span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
89:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">HTML_COLOR_REGEXP</span>; <span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
90:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Don't know how to create a color from #{source.inspect}!&quot;</span>
91:       <span class="ruby-keyword kw">end</span>
92:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000478" class="method-detail">
        <a name="M000478"></a>

        <div class="method-heading">
          <a href="#M000478" class="method-signature">
          <span class="method-name">pass_bytesize</span><span class="method-args">(color_mode, depth, width, height)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of bytes used for an image pass @param [Integer]
color_mode The color mode in which the pixels are
</p>
<pre>
  stored.
</pre>
<p>
@param [Integer] depth The color depth of the pixels. @param [Integer]
width The width of the image pass. @param [Integer] width The height of the
image pass. @return [Integer] The number of bytes used per scanline in <a
href="Color.html#M000445">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000478-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000478-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 976</span>
976:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pass_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">height</span>)
977:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">height</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
978:       (<span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">height</span>
979:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000476" class="method-detail">
        <a name="M000476"></a>

        <div class="method-heading">
          <a href="#M000476" class="method-signature">
          <span class="method-name">pixel_bitsize</span><span class="method-args">(color_mode, depth = 8)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the size in bits of <a href="Color.html#M000445">a</a> pixel when
it is stored using <a href="Color.html#M000445">a</a> given color mode.
</p>
<p>
@param [Integer] color_mode The color mode in which the pixels are
</p>
<pre>
  stored.
</pre>
<p>
@param [Integer] depth The color depth of the pixels. @return [Integer] The
number of bytes used per pixel in <a href="Color.html#M000445">a</a>
datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000476-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000476-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 955</span>
955:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
956:       <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">depth</span>
957:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000475" class="method-detail">
        <a name="M000475"></a>

        <div class="method-heading">
          <a href="#M000475" class="method-signature">
          <span class="method-name">pixel_bytesize</span><span class="method-args">(color_mode, depth = 8)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the size in bytes of <a href="Color.html#M000445">a</a> pixel when
it is stored using <a href="Color.html#M000445">a</a> given color mode.
</p>
<p>
@param [Integer] color_mode The color mode in which the pixels are
</p>
<pre>
  stored.
</pre>
<p>
@return [Integer] The number of bytes used per pixel in <a
href="Color.html#M000445">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000475-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000475-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 943</span>
943:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pixel_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
944:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">8</span>
945:       (<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
946:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000442" class="method-detail">
        <a name="M000442"></a>

        <div class="method-heading">
          <a href="#M000442" class="method-signature">
          <span class="method-name">r</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the red-component from the color value.
</p>
<p>
@param [Integer] value The color value. @return [Integer] A value between 0
and MAX.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000442-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000442-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 272</span>
272:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>)
273:       (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff000000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">24</span>
274:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000433" class="method-detail">
        <a name="M000433"></a>

        <div class="method-heading">
          <a href="#M000433" class="method-signature">
          <span class="method-name">rgb</span><span class="method-args">(r, g, b)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color using an <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a>, <a
href="Color.html#M000444">b</a> triple. @param [Integer] <a
href="Color.html#M000442">r</a> The <a
href="Color.html#M000442">r</a>-component (0-255) @param [Integer] <a
href="Color.html#M000443">g</a> The <a
href="Color.html#M000443">g</a>-component (0-255) @param [Integer] <a
href="Color.html#M000444">b</a> The <a
href="Color.html#M000444">b</a>-component (0-255) @return [Integer] The
newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000433-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000433-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 109</span>
109:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rgb</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>)
110:       <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
111:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000432" class="method-detail">
        <a name="M000432"></a>

        <div class="method-heading">
          <a href="#M000432" class="method-signature">
          <span class="method-name">rgba</span><span class="method-args">(r, g, b, a)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="Color.html#M000445">a</a> new color using an <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a>, <a
href="Color.html#M000444">b</a> triple and an alpha value. @param [Integer]
<a href="Color.html#M000442">r</a> The <a
href="Color.html#M000442">r</a>-component (0-255) @param [Integer] <a
href="Color.html#M000443">g</a> The <a
href="Color.html#M000443">g</a>-component (0-255) @param [Integer] <a
href="Color.html#M000444">b</a> The <a
href="Color.html#M000444">b</a>-component (0-255) @param [Integer] <a
href="Color.html#M000445">a</a> The opacity (0-255) @return [Integer] The
newly constructed color value.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000432-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000432-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 100</span>
100:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">a</span>)
101:       <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
102:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000474" class="method-detail">
        <a name="M000474"></a>

        <div class="method-heading">
          <a href="#M000474" class="method-signature">
          <span class="method-name">samples_per_pixel</span><span class="method-args">(color_mode)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of sample values per pixel. @param [Integer] color_mode
The color mode being used. @return [Integer] The number of sample values
per pixel.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000474-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000474-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 926</span>
926:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>)
927:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">color_mode</span>
928:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_INDEXED</span>;         <span class="ruby-value">1</span>
929:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR</span>;       <span class="ruby-value">3</span>
930:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR_ALPHA</span>; <span class="ruby-value">4</span>
931:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE</span>;       <span class="ruby-value">1</span>
932:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE_ALPHA</span>; <span class="ruby-value">2</span>
933:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">NotSupported</span>, <span class="ruby-node">&quot;Don't know the number of samples for this colormode: #{color_mode}!&quot;</span>
934:       <span class="ruby-keyword kw">end</span>
935:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000477" class="method-detail">
        <a name="M000477"></a>

        <div class="method-heading">
          <a href="#M000477" class="method-signature">
          <span class="method-name">scanline_bytesize</span><span class="method-args">(color_mode, depth, width)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the number of bytes used per scanline. @param [Integer] color_mode
The color mode in which the pixels are
</p>
<pre>
  stored.
</pre>
<p>
@param [Integer] depth The color depth of the pixels. @param [Integer]
width The number of pixels per scanline. @return [Integer] The number of
bytes used per scanline in <a href="Color.html#M000445">a</a> datastream.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000477-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000477-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 965</span>
965:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>)
966:       ((<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
967:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000457" class="method-detail">
        <a name="M000457"></a>

        <div class="method-heading">
          <a href="#M000457" class="method-signature">
          <span class="method-name">to_grayscale</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converts <a href="Color.html#M000445">a</a> color to <a
href="Color.html#M000445">a</a> fiting <a
href="Color.html#M000434">grayscale</a> value. It will conserve the alpha
channel.
</p>
<p>
This method will return <a href="Color.html#M000445">a</a> full color
value, with the R, G, and B value set to the <a
href="Color.html#M000434">grayscale</a> teint calcuated from the input
color&#8216;s R, G and B values.
</p>
<p>
@param [Integer] color The color to convert. @return [Integer] The input
color, converted to the best fitting
</p>
<pre>
  grayscale.
</pre>
<p>
@see <a href="Color.html#M000456">grayscale_teint</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000457-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000457-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 450</span>
450:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale</span>(<span class="ruby-identifier">color</span>)
451:       <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>))
452:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000471" class="method-detail">
        <a name="M000471"></a>

        <div class="method-heading">
          <a href="#M000471" class="method-signature">
          <span class="method-name">to_grayscale_alpha_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the <a href="Color.html#M000434">grayscale</a> teint
and alpha channel values for this color.
</p>
<p>
This method expects the color to be <a
href="Color.html#M000434">grayscale</a>, i.e. <a
href="Color.html#M000442">r</a>, <a href="Color.html#M000443">g</a>, and <a
href="Color.html#M000444">b</a> value to be equal and uses only the B
channel. If you need to convert <a href="Color.html#M000445">a</a> color to
<a href="Color.html#M000434">grayscale</a> first, see {<a
href="Color.html#M000457">to_grayscale</a>}.
</p>
<p>
@param [Integer] color The <a href="Color.html#M000434">grayscale</a> color
to convert. @return [Array&lt;Integer&gt;] An array with 2 Integer
elements. @see <a href="Color.html#M000457">to_grayscale</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000471-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000471-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 695</span>
695:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
696:       [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment cmt"># assumption r == g == b</span>
697:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000470" class="method-detail">
        <a name="M000470"></a>

        <div class="method-heading">
          <a href="#M000470" class="method-signature">
          <span class="method-name">to_grayscale_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the <a href="Color.html#M000434">grayscale</a> teint
value for this color.
</p>
<p>
This method expects the <a href="Color.html#M000442">r</a>, <a
href="Color.html#M000443">g</a>, and <a href="Color.html#M000444">b</a>
value to be equal, and the alpha channel will be discarded.
</p>
<p>
@param [Integer] color The <a href="Color.html#M000434">grayscale</a> color
to convert. @return [Array&lt;Integer&gt;] An array with 1 Integer element.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000470-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000470-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 681</span>
681:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_grayscale_bytes</span>(<span class="ruby-identifier">color</span>)
682:       [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment cmt"># assumption r == g == b</span>
683:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000464" class="method-detail">
        <a name="M000464"></a>

        <div class="method-heading">
          <a href="#M000464" class="method-signature">
          <span class="method-name">to_hex</span><span class="method-args">(color, include_alpha = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <a href="Color.html#M000445">a</a> string representing this color
using hex notation (i.e. rrggbbaa).
</p>
<p>
@param [Integer] value The color to convert. @return [<a
href="../String.html">String</a>] The color in hex notation, starting with
<a href="Color.html#M000445">a</a> pound sign.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000464-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000464-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 568</span>
568:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hex</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword kw">true</span>)
569:       <span class="ruby-identifier">include_alpha</span> <span class="ruby-value">? </span>(<span class="ruby-value str">'#%08x'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">color</span>) <span class="ruby-operator">:</span> (<span class="ruby-value str">'#%06x'</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">color</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>])
570:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000466" class="method-detail">
        <a name="M000466"></a>

        <div class="method-heading">
          <span class="method-name">to_hsb</span><span class="method-args">(color, include_alpha = false)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Color.html#M000465">to_hsv</a>
</p>
        </div>
      </div>

      <div id="method-M000467" class="method-detail">
        <a name="M000467"></a>

        <div class="method-heading">
          <a href="#M000467" class="method-signature">
          <span class="method-name">to_hsl</span><span class="method-args">(color, include_alpha = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate HSL components of <a
href="Color.html#M000445">a</a> color.
</p>
<p>
Because <a href="../ChunkyPNG.html">ChunkyPNG</a> internally handles colors
as Integers for performance reasons, some rounding occurs when importing or
exporting HSL colors whose coordinates are float-based. Because of this
rounding, <a href="Color.html#M000467">to_hsl</a> and <a
href="Color.html#M000441">from_hsl</a> may not be perfect inverses.
</p>
<p>
This implementation follows the modern convention of 0 degrees hue
indicating red.
</p>
<p>
@param [Integer] color The <a href="../ChunkyPNG.html">ChunkyPNG</a> color
to convert. @param [Boolean] include_alpha Flag indicates whether <a
href="Color.html#M000445">a</a> fourth element
</p>
<pre>
    representing alpha channel should be included in the returned array.
</pre>
<p>
@return [Array&lt;Fixnum&gt;[0]] The hue of the color (0-360) @return
[Array&lt;Fixnum&gt;[1]] The saturation of the color (0-1) @return
[Array&lt;Fixnum&gt;[2]] The lightness of the color (0-1) @return
[Array&lt;Fixnum&gt;[3]] Optional fourth element for alpha, included if
</p>
<pre>
    include_alpha=true (0-255)
</pre>
<p>
@see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000467-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000467-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 619</span>
619:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hsl</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword kw">false</span>)
620:       <span class="ruby-identifier">hue</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">max</span>, <span class="ruby-identifier">min</span> = <span class="ruby-identifier">hue_and_chroma</span>(<span class="ruby-identifier">color</span>)
621:       <span class="ruby-identifier">lightness</span>  = <span class="ruby-value">0</span><span class="ruby-value">.5</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">max</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span>)
622:       <span class="ruby-identifier">saturation</span> = <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-value">? </span><span class="ruby-value">0</span><span class="ruby-value">.0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-value">1</span> <span class="ruby-operator">-</span> (<span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>)
623: 
624:       <span class="ruby-identifier">include_alpha</span> <span class="ruby-value">? </span>[<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-operator">:</span>
625:                       [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>]
626:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000465" class="method-detail">
        <a name="M000465"></a>

        <div class="method-heading">
          <a href="#M000465" class="method-signature">
          <span class="method-name">to_hsv</span><span class="method-args">(color, include_alpha = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate HSV components of <a
href="Color.html#M000445">a</a> color.
</p>
<p>
Because <a href="../ChunkyPNG.html">ChunkyPNG</a> internally handles colors
as Integers for performance reasons, some rounding occurs when importing or
exporting HSV colors whose coordinates are float-based. Because of this
rounding, <a href="Color.html#M000465">to_hsv</a> and <a
href="Color.html#M000439">from_hsv</a> may not be perfect inverses.
</p>
<p>
This implementation follows the modern convention of 0 degrees hue
indicating red.
</p>
<p>
@param [Integer] color The <a href="../ChunkyPNG.html">ChunkyPNG</a> color
to convert. @param [Boolean] include_alpha Flag indicates whether <a
href="Color.html#M000445">a</a> fourth element
</p>
<pre>
   representing alpha channel should be included in the returned array.
</pre>
<p>
@return [Array[0]] The hue of the color (0-360) @return [Array[1]] The
saturation of the color (0-1) @return [Array[2]] The value of the color
(0-1) @return [Array[3]] Optional fourth element for alpha, included if
</p>
<pre>
   include_alpha=true (0-255)
</pre>
<p>
@see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000465-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000465-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 591</span>
591:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hsv</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword kw">false</span>)
592:       <span class="ruby-identifier">hue</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">max</span>, <span class="ruby-identifier">min</span> = <span class="ruby-identifier">hue_and_chroma</span>(<span class="ruby-identifier">color</span>)
593:       <span class="ruby-identifier">value</span>      = <span class="ruby-identifier">max</span>
594:       <span class="ruby-identifier">saturation</span> = <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-value">? </span><span class="ruby-value">0</span><span class="ruby-value">.0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">value</span>)
595: 
596:       <span class="ruby-identifier">include_alpha</span> <span class="ruby-value">? </span>[<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-operator">:</span>
597:                       [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>]
598:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000468" class="method-detail">
        <a name="M000468"></a>

        <div class="method-heading">
          <a href="#M000468" class="method-signature">
          <span class="method-name">to_truecolor_alpha_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate RGBA values for this color.
</p>
<p>
@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 4 Integer elements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000468-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000468-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 661</span>
661:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_truecolor_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
662:       [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)]
663:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000469" class="method-detail">
        <a name="M000469"></a>

        <div class="method-heading">
          <a href="#M000469" class="method-signature">
          <span class="method-name">to_truecolor_bytes</span><span class="method-args">(color)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array with the separate RGB values for this color. The alpha
channel will be discarded.
</p>
<p>
@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 3 Integer elements.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000469-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000469-source">
<pre>
     <span class="ruby-comment cmt"># File lib/chunky_png/color.rb, line 670</span>
670:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_truecolor_bytes</span>(<span class="ruby-identifier">color</span>)
671:       [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)]
672:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>